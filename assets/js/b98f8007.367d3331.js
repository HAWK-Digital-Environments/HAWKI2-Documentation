"use strict";(self.webpackChunkdocs_site=self.webpackChunkdocs_site||[]).push([[45],{9599:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"HAWKI/GettingStarted/Local Docker Installation","title":"Local Docker Installation","description":"This guide will walk you through setting up a local Docker environment for developing and testing HAWKI on your local machine.","source":"@site/docs/HAWKI/2-GettingStarted/2-Local Docker Installation.md","sourceDirName":"HAWKI/2-GettingStarted","slug":"/HAWKI/GettingStarted/Local Docker Installation","permalink":"/HAWKI2-Documentation/HAWKI/GettingStarted/Local Docker Installation","draft":false,"unlisted":false,"editUrl":"https://github.com/hawk/your-project/edit/main/docs/HAWKI/2-GettingStarted/2-Local Docker Installation.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"HAWKI_Sidebar","previous":{"title":"Local Installation","permalink":"/HAWKI2-Documentation/HAWKI/GettingStarted/Local Installation"},"next":{"title":"Architecture","permalink":"/HAWKI2-Documentation/category/architecture"}}');var i=t(4848),s=t(8453);const l={sidebar_position:2},r="Local Docker Installation",a={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installation",id:"installation",level:2},{value:"Defining your API keys for the AI Models",id:"defining-your-api-keys-for-the-ai-models",level:3},{value:"The fast way: Using the <code>bin/env</code> script",id:"the-fast-way-using-the-binenv-script",level:3},{value:"A few words on the <code>bin/env</code> script.",id:"a-few-words-on-the-binenv-script",level:4},{value:"Manual Installation",id:"manual-installation",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"local-docker-installation",children:"Local Docker Installation"})}),"\n",(0,i.jsxs)(n.p,{children:["This guide will walk you through setting up a local Docker environment for developing and testing HAWKI on your local machine.\nPlease keep in mind, that this guide is intended for development and testing purposes only. For production,\nplease refer to the ",(0,i.jsx)(n.a,{href:"Docker%20Deployment.md",children:"production installation guide"}),", as it is more secure and robust."]}),"\n",(0,i.jsxs)(n.p,{children:["The PHP(8.4) container is based on an alpine linux using FPM which can be found ",(0,i.jsx)(n.a,{href:"https://github.com/Neunerlei/docker-php",children:"here"}),",\nwe are planning to deploy our own php base image built on a ubuntu distro in the future."]}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.docker.com/get-docker/",children:"Docker"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/install/",children:"Docker Compose"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Theoretically, it should work with any operating system that supports Docker and Docker Compose.\nIt also should work with ",(0,i.jsx)(n.a,{href:"https://podman.io/",children:"podman"})," and ",(0,i.jsx)(n.a,{href:"https://docs.podman.io/en/latest/markdown/podman-compose.1.html",children:"podman-compose"}),"\nas a drop-in replacement for Docker and Docker Compose, however this has not been tested; if you are experiencing issues, please let us know!"]}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsxs)(n.p,{children:["You have two options to run HAWKI with docker; you can either set up everything manually or use our ",(0,i.jsx)(n.code,{children:"bin/env"})," script to\ncontrol the environment for you. This guide will have some overlaps with the ",(0,i.jsx)(n.a,{href:"Local%20Installation.md",children:"Local Installation Guide"}),",\nand will refer to it for some steps."]}),"\n",(0,i.jsx)(n.h3,{id:"defining-your-api-keys-for-the-ai-models",children:"Defining your API keys for the AI Models"}),"\n",(0,i.jsxs)(n.p,{children:['This is necessary to configure the AI models that HAWKI uses, you MUST do this before starting the application.\nFollow the "Configuration -> API KEYS" section of the ',(0,i.jsx)(n.a,{href:"Local%20Installation.md",children:"Local Installation Guide"})," to define your API keys."]}),"\n",(0,i.jsxs)(n.h3,{id:"the-fast-way-using-the-binenv-script",children:["The fast way: Using the ",(0,i.jsx)(n.code,{children:"bin/env"})," script"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Clone the Git Repo:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"git clone git@github.com:HAWK-Digital-Environments/HAWKI.git\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Navigate to the project folder:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"cd HAWKI\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsxs)(n.strong,{children:["Run the ",(0,i.jsx)(n.code,{children:"bin/env"})," script:"]})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"bin/env up\n"})}),"\n",(0,i.jsx)(n.p,{children:"OR (if you want to follow the output of the containers)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"bin/env up -f\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"HINT:"})," bin/env SHOULD be executable by default. If it is not, you can make it executable by running ",(0,i.jsx)(n.code,{children:"chmod +x bin/env"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["If you not already have the ",(0,i.jsx)(n.code,{children:".env"})," file, the script will ask you to create one. You can use the default values by pressing enter (twice).\nThe script will also automatically create a test user for you, if you have not already done so.\nYou will be able to log in with the username ",(0,i.jsx)(n.code,{children:"tester"})," and the password ",(0,i.jsx)(n.code,{children:"tester"}),"."]}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Start the workers:"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["(If you opted for the ",(0,i.jsx)(n.code,{children:"-f"})," flag in the previous step, you will need to open a new terminal window for this step).\nThis process MUST be running while you are using the application!"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"bin/env dev\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Access the application:"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"(Do this either in the original terminal window (if not using the -f) or in a new one).\nThis command will open the application in your default browser."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"bin/env open\n"})}),"\n",(0,i.jsx)(n.p,{children:"Well done!"}),"\n",(0,i.jsxs)(n.h4,{id:"a-few-words-on-the-binenv-script",children:["A few words on the ",(0,i.jsx)(n.code,{children:"bin/env"})," script."]}),"\n",(0,i.jsxs)(n.p,{children:["The script is build using node.js and is located in the ",(0,i.jsx)(n.code,{children:"bin"})," folder.\nFor the most part it acts as a convenience wrapper around ",(0,i.jsx)(n.code,{children:"docker-compose"})," and ",(0,i.jsx)(n.code,{children:"docker"})," commands, but it also has some additional features.\nTo see all available commands, run ",(0,i.jsx)(n.code,{children:"bin/env"})," without any arguments to see a detailed help."]}),"\n",(0,i.jsx)(n.p,{children:"A few commands that might be useful:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"bin/env up"}),' will start the application. (Supports all docker compose flags + "-f" to follow the output of the containers)']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"bin/env down"})," will stop the application and remove all containers. (Supports all docker compose flags)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"bin/env restart"})," will restart the application."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"bin/env open"})," will open the application in your default browser."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"bin/env dev"})," will start the worker and websocket listeners."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"bin/env ssh"}),' will open a shell into a container (If no parameter is given, it will open the shell of the php container); can use any "docker-compose" service name to shell into that container.']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"bin/env logs"})," will show the logs of the containers. (Supports all docker compose flags)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"bin/env composer"})," executes the composer command in the php container. (Works like a normal composer command)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"bin/env npm"})," executes the npm command in the node container. (Works like a normal npm command)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"bin/env artisan"})," executes the artisan command in the php container. (Works like a normal artisan command)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"manual-installation",children:"Manual Installation"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Clone the Git Repo:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"git clone git@github.com:HAWK-Digital-Environments/HAWKI.git\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Navigate to the project folder:"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"cd HAWKI\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsxs)(n.strong,{children:["Create the ",(0,i.jsx)(n.code,{children:".env"})," file:"]})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Copy the ",(0,i.jsx)(n.code,{children:".env.example"})," file to ",(0,i.jsx)(n.code,{children:".env"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cp .env.example .env\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Adjust the ",(0,i.jsx)(n.code,{children:".env"})," file to your needs. You can use the default values for development."]}),"\n",(0,i.jsx)(n.p,{children:"To configure the file for the docker-compose.yml file you can use the following values:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dotenv",children:'APP_URL=http://localhost\nAUTHENTICATION_METHOD=LDAP# or OPENID or SHIBBOLETH\nTEST_USER_LOGIN=true\nDB_HOST=mysql\nDB_PORT=3306\nDB_DATABASE=db\nDB_USERNAME=user\nDB_PASSWORD=password\nREVERB_APP_ID=hawki\nREVERB_APP_KEY=hawki\nVITE_REVERB_HOST=localhost\nVITE_REVERB_PORT=80\nMAIL_MAILER=sendmail\nMAIL_SENDMAIL_PATH="/usr/bin/mhsendmail --from=test@example.org --smtp-addr=mailhog:1025 -t"\nCACHE_STORE=redis\nREDIS_HOST=redis\nREDIS_PORT=6379\nREDIS_USERNAME=default\nREDIS_PASSWORD=password\n'})}),"\n",(0,i.jsx)(n.p,{children:"You also need to fill some additional values, but you must generate the values yourself."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dotenv",children:"APP_KEY=RANDOM_STRING(32)\nREVERB_APP_SECRET=RANDOM_STRING(32)\nUSERDATA_ENCRYPTION_SALT=BASE_64(RANDOM_STRING(32))\nINVITATION_SALT=BASE_64(RANDOM_STRING(32))\nAI_CRYPTO_SALT=BASE_64(RANDOM_STRING(32))\nPASSKEY_SALT=BASE_64(RANDOM_STRING(32))\nBACKUP_SALT=BASE_64(RANDOM_STRING(32))\n"})}),"\n",(0,i.jsx)(n.p,{children:"All other values are optional and can be left as they are OR adjusted to your needs."}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Install the test user:"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:['Follow the "Configuration -> Authentication" section of the ',(0,i.jsx)(n.a,{href:"Local%20Installation.md",children:"Local Installation Guide"})," to create\nthe test user file."]}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Start the application:"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:'The "-d" is optional and will start the containers in the background. If you want to follow the output of the containers, you can omit the "-d".'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker-compose up -d\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Start the queue worker:"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This processes keeps running and will block your terminal. You can open a new terminal window to run the next command."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker-compose exec php php artisan queue:work --queue=default,mails,message_broadcast\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"7",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Start the reverb websocket server:"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This processes keeps running and will block your terminal. You can open a new terminal window to run the next command."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker-compose exec php php artisan reverb:start\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"8",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Access the application:"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Open your browser and navigate to ",(0,i.jsx)(n.a,{href:"http://localhost",children:"http://localhost"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>r});var o=t(6540);const i={},s=o.createContext(i);function l(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);